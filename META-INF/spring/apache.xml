<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:flow="http://www.argeo.org/schema/slc-flow"
	xsi:schemaLocation="
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd
	http://www.argeo.org/schema/slc-flow http://www.argeo.org/schema/slc-flow-1.2.xsd">

	<flow:flow name="apache/org.apache.lucene"
		spec="spec.version">
		<flow:arg name="version" value="3.6.2" />
		<bean id="org.apache.lucene" parent="template.apacheMaven"
			p:version="@{version}"
			p:sourceCoords="org.apache.lucene:lucene-core:@{version}" />
	</flow:flow>

	<flow:flow name="apache/org.apache.tika" spec="spec.version">
		<flow:arg name="version" value="1.19" />
		<bean id="org.apache.tika.core" parent="template.tikaMaven"
			p:sourceCoords="org.apache.tika:tika-core:@{version}">
			<property name="doNotModify" value="true" />
		</bean>
		<bean id="org.apache.tika.parsers" parent="template.tikaMaven"
			p:sourceCoords="org.apache.tika:tika-parsers:@{version}">
			<property name="bndProperties">
				<props merge="true">
					<prop key="Bundle-Activator">org.apache.tika.parser.internal.Activator</prop>
					<prop key="Import-Package">
						*;resolution:=optional
					</prop>
				</props>
			</property>
		</bean>
	</flow:flow>

	<bean id="org.apache.log4j" p:groupId="org.argeo.tp.apache"
		parent="template.bndWrapper">
		<property name="bndProperties">
			<props merge="true">
				<prop key="Import-Package">
					*,
					com.ibm.uvm.tools;resolution:=optional,
					com.sun.jdmk.comm;resolution:=optional,
					javax.jmdns;resolution:=optional,
					javax.jms;resolution:=optional,
					javax.mail;resolution:=optional,
					javax.mail.internet;resolution:=optional,
				</prop>
			</props>
		</property>
	</bean>

	<bean id="org.apache.mina.core"
		p:sourceCoords="org.apache.mina:mina-core:2.0.20"
		parent="template.apacheMaven">
		<property name="doNotModify" value="true" />
	</bean>

	<!-- Needed by Apache SSHD in order to integrate with Unix agent -->
	<bean id="org.apache.tomcat.jni"
		p:sourceCoords="org.apache.tomcat:tomcat-jni:9.0.17"
		parent="template.apacheMaven">
	</bean>

	<flow:flow name="apache/org.apache.sshd" spec="spec.version">
		<flow:arg name="version" value="2.2.0" />
		<bean id="org.apache.sshd.core"
			p:sourceCoords="org.apache.sshd:sshd-core:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
		<bean id="org.apache.sshd.common"
			p:sourceCoords="org.apache.sshd:sshd-common:@{version}"
			parent="template.apacheMaven">
			<property name="bndProperties">
				<props merge="true">
					<prop key="Fragment-Host">org.apache.sshd.core</prop>
					<prop key="Import-Package">
						org.bouncycastle.jce.provider;resolution:=optional,
						net.i2p.crypto.eddsa;resolution:=optional,
						*
					</prop>
				</props>
			</property>
		</bean>
		<bean id="org.apache.sshd.sftp"
			p:sourceCoords="org.apache.sshd:sshd-sftp:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
		<bean id="org.apache.sshd.cli"
			p:sourceCoords="org.apache.sshd:sshd-cli:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
		<bean id="org.apache.sshd.scp"
			p:sourceCoords="org.apache.sshd:sshd-scp:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
		<bean id="org.apache.sshd.putty"
			p:sourceCoords="org.apache.sshd:sshd-putty:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
		<bean id="org.apache.sshd.git"
			p:sourceCoords="org.apache.sshd:sshd-git:@{version}"
			p:doNotModify="true" parent="template.apacheMaven" />
	</flow:flow>

	<!-- Log4j12 Factory -->
	<flow:flow name="apache/org.apache.log4j" spec="spec.version">
		<flow:arg name="version" value="1.2.17" />
		<bean parent="template.archiveWrapper">
			<property name="uri"
				value="http://archive.apache.org/dist/logging/log4j/@{version}/log4j-@{version}.zip" />
			<property name="license">
				<util:constant
					static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
			</property>
			<property name="wrappers">
				<map>
					<entry key="apache-log4j-@{version}/log4j-@{version}.jar"
						value-ref="org.apache.log4j" />
				</map>
			</property>
			<property name="sourcesProvider">
				<bean class="org.argeo.slc.repo.osgi.ArchiveSourcesProvider">
					<property name="uri"
						value="http://archive.apache.org/dist/logging/log4j/@{version}/log4j-@{version}.zip" />
					<property name="base"
						value="apache-log4j-@{version}/src/main/java/" />
					<property name="osgiFactory" ref="osgiFactory" />
				</bean>
			</property>
		</bean>
	</flow:flow>

	<flow:flow name="apache/org.apache.pdfbox"
		spec="spec.version">
		<flow:arg name="version" value="2.0.2" />
		<bean id="org.apache.pdfbox" parent="template.apacheMaven"
			p:version="@{version}"
			p:sourceCoords="org.apache.pdfbox:pdfbox:@{version}" />
		<bean id="org.apache.pdfbox.fontbox"
			parent="template.apacheMaven" p:version="@{version}"
			p:sourceCoords="org.apache.pdfbox:fontbox:@{version}" />
		<bean id="org.apache.pdfbox.xmpbox" parent="template.apacheMaven"
			p:version="@{version}"
			p:sourceCoords="org.apache.pdfbox:xmpbox:@{version}" />
		<!-- Legacy, still used by Tika -->
		<bean id="org.apache.pdfbox.jempbox"
			parent="template.apacheMaven" p:version="@{version}"
			p:sourceCoords="org.apache.pdfbox:jempbox:1.8.2" />
	</flow:flow>

	<flow:flow name="apache/org.apache.poi" spec="spec.version">
		<flow:arg name="version" value="4.0.0" />
		<!-- <bean id="org.apache.poi" parent="template.apacheMaven" -->
		<!-- p:version="@{version}" -->
		<!-- p:sourceCoords="org.apache.servicemix.bundles:org.apache.servicemix.bundles.poi:@{version}_1"> -->
		<!-- <property name="doNotModify" value="true" /> -->
		<!-- </bean> -->
		<bean id="org.apache.poi" parent="template.apacheMaven"
			p:version="@{version}" p:sourceCoords="org.apache.poi:poi:@{version}" />
		<bean id="org.apache.poi.ooxml" parent="template.apacheMaven"
			p:version="@{version}"
			p:sourceCoords="org.apache.poi:poi-ooxml:@{version}">
			<property name="bndProperties">
				<props merge="true">
					<!-- <prop key="Fragment-Host">org.apache.poi</prop> -->
					<prop key="Import-Package">
						com.graphbuilder.*;resolution:=optional,
						org.etsi.uri.*;resolution:=optional,
						*
					</prop>
				</props>
			</property>
		</bean>

		<bean id="org.apache.poi.ooxml.schemas"
			parent="template.apacheMaven" p:version="@{version}"
			p:sourceCoords="org.apache.poi:poi-ooxml-schemas:@{version}">
			<property name="bndProperties">
				<props merge="true">
					<!-- <prop key="Fragment-Host">org.apache.poi</prop> -->
					<prop key="Import-Package">
						com.microsoft.schemas.*;resolution:=optional,
						org.openxmlformats.schemas.*;resolution:=optional,
						*
					</prop>
					<prop key="Require-Bundle">org.apache.xmlbeans</prop>
				</props>
			</property>
		</bean>
		<bean id="org.apache.poi.scratchpad"
			parent="template.apacheMaven" p:version="@{version}"
			p:sourceCoords="org.apache.poi:poi-scratchpad:@{version}">
			<property name="bndProperties">
				<props merge="true">
					<!-- <prop key="Fragment-Host">org.apache.poi</prop> -->
					<prop key="Import-Package">
						*
					</prop>
				</props>
			</property>
		</bean>
	</flow:flow>

	<bean id="org.apache.xmlbeans"
		p:sourceCoords="org.apache.xmlbeans:xmlbeans:3.0.1"
		parent="template.apacheMaven">
		<property name="bndProperties">
			<props merge="true">
				<prop key="DynamicImport-Package">*</prop>
				<prop key="Import-Package">
					com.sun.*;resolution:=optional,
					*
				</prop>
			</props>
		</property>
	</bean>

	<bean id="org.apache.xalan" p:sourceCoords="xalan:xalan:2.7.2"
		parent="template.apacheMaven" />
	<bean id="org.apache.xalan.serializer"
		p:sourceCoords="xalan:serializer:2.7.2" parent="template.apacheMaven" />

	<bean id="org.apache.xerces"
		p:sourceCoords="xerces:xercesImpl:2.12.0"
		parent="template.apacheMaven">
		<property name="bndProperties">
			<props merge="true">
				<prop key="Import-Package">
					sun.*;resolution:=optional,
					*
				</prop>
			</props>
		</property>
	</bean>

	<bean id="org.apache.xml.resolver"
		p:sourceCoords="xml-resolver:xml-resolver:1.2"
		parent="template.apacheMaven" />

	<bean id="org.apache.xml.security"
		p:sourceCoords="org.apache.santuario:xmlsec:2.1.2"
		parent="template.apacheMaven" />

	<flow:flow name="apache/org.apache.batik" spec="spec.version">
		<flow:arg name="version" value="1.10" />
		<!-- <bean id="org.apache.batik.ext" parent="template.apacheMaven" -->
		<!-- p:version="@{version}" p:sourceCoords="org.apache.xmlgraphics:batik-ext:jar:@{version}" 
			/> -->
		<bean id="org.apache.batik.i18n" parent="template.apacheMaven"
			p:version="@{version}.0"
			p:sourceCoords="org.apache.xmlgraphics:batik-i18n:jar:@{version}" />
		<bean id="org.apache.batik.util" parent="template.apacheMaven"
			p:version="@{version}.0"
			p:sourceCoords="org.apache.xmlgraphics:batik-util:jar:@{version}" />
		<bean id="org.apache.batik.css" parent="template.apacheMaven"
			p:version="@{version}.0"
			p:sourceCoords="org.apache.xmlgraphics:batik-css:jar:@{version}" />
	</flow:flow>

	<flow:flow name="apache/org.apache.xmlgraphics"
		spec="spec.version">
		<flow:arg name="version" value="2.3" />
		<bean id="org.apache.xmlgraphics.commons"
			parent="template.apacheMaven" p:version="@{version}.0"
			p:sourceCoords="org.apache.xmlgraphics:xmlgraphics-commons:jar:@{version}" />
	</flow:flow>


	<flow:flow name="apache/org.apache.httpcomponents.httpclient"
		spec="spec.version">
		<flow:arg name="version" value="4.5.6" />
		<bean parent="template.archiveWrapper">
			<property name="version" value="@{version}" />
			<property name="license">
				<util:constant
					static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
			</property>
			<property name="uri"
				value="http://archive.apache.org/dist/httpcomponents/httpclient/binary/httpcomponents-client-@{version}-osgi-bin.zip" />
			<property name="includes">
				<map>
					<entry
						key="httpcomponents-client-@{version}/org.apache.httpcomponents.httpclient_@{version}.jar"
						value="org.argeo.tp.apache" />
				</map>
			</property>
			<property name="sourcesProvider">
				<bean class="org.argeo.slc.repo.osgi.ArchiveSourcesProvider">
					<property name="uri"
						value="http://archive.apache.org/dist/httpcomponents/httpclient/source/httpcomponents-client-@{version}-src.zip" />
					<property name="base"
						value="httpcomponents-client-@{version}/httpclient/src/main/java/" />
					<property name="osgiFactory" ref="osgiFactory" />
				</bean>
			</property>
		</bean>
	</flow:flow>

	<flow:flow name="apache/org.apache.httpcomponents.httpcore"
		spec="spec.version">
		<flow:arg name="version" value="4.4.10" />
		<bean parent="template.archiveWrapper">
			<property name="version" value="@{version}" />
			<property name="license">
				<util:constant
					static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
			</property>
			<property name="uri"
				value="http://archive.apache.org/dist/httpcomponents/httpcore/binary/httpcomponents-core-@{version}-osgi-bin.zip" />
			<property name="includes">
				<map>
					<entry
						key="httpcomponents-core-@{version}/org.apache.httpcomponents.httpcore_@{version}.jar"
						value="org.argeo.tp.apache" />
				</map>
			</property>
			<property name="sourcesProvider">
				<bean class="org.argeo.slc.repo.osgi.ArchiveSourcesProvider">
					<property name="uri"
						value="http://archive.apache.org/dist/httpcomponents/httpcore/source/httpcomponents-core-@{version}-src.zip" />
					<property name="base"
						value="httpcomponents-core-@{version}/httpcore/src/main/java/" />
					<property name="osgiFactory" ref="osgiFactory" />
				</bean>
			</property>
		</bean>
	</flow:flow>

	<bean id="org.apache.aries.util" parent="template.ariesMaven"
		p:sourceCoords="org.apache.aries:org.apache.aries.util:1.1.3" />
	<bean id="org.apache.aries.spifly.dynamic.bundle"
		parent="template.ariesMaven"
		p:sourceCoords="org.apache.aries.spifly:org.apache.aries.spifly.dynamic.bundle:1.2.1" />

	<!-- Templates -->
	<bean id="template.apacheMaven" parent="template.mavenWrapper"
		abstract="true">
		<property name="groupId" value="org.argeo.tp.apache" />
		<property name="license">
			<util:constant
				static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
		</property>
	</bean>

	<bean id="template.tikaMaven" parent="template.apacheMaven"
		abstract="true">
		<property name="version" value="@{version}.0" />
		<!-- <property name="doNotModify" value="true" /> -->
		<property name="license">
			<util:constant
				static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
		</property>
	</bean>

	<bean id="template.ariesMaven" parent="template.mavenWrapper"
		abstract="true">
		<property name="groupId" value="org.argeo.tp.apache" />
		<property name="license">
			<util:constant
				static-field="org.argeo.slc.repo.FreeLicense.APACHE" />
		</property>
		<property name="doNotModify" value="true" />
	</bean>
</beans>